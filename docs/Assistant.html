<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#27CFA7">
    <meta name="msapplication-navbutton-color" content="#27CFA7">
    <meta name="apple-mobile-web-app-status-bar-style" content="#27CFA7">
    <title>TebNegar - دستیار هوشمند پزشکی</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'medical-blue': {
                            50: '#eef4ff',
                            100: '#dde7ff',
                            200: '#b9cffd',
                            300: '#91b3fb',
                            400: '#5f90f7',
                            500: '#3D7FF9',
                            600: '#2f63d6',
                            700: '#244db1',
                            800: '#1e3f8f',
                            900: '#183571'
                        },
                        'medical-green': {
                            50: '#eafaf5',
                            100: '#d2f5ec',
                            200: '#a6ebd9',
                            300: '#7de0c7',
                            400: '#49d2b0',
                            500: '#27CFA7',
                            600: '#20b38f',
                            700: '#199579',
                            800: '#147861',
                            900: '#0f5d4c'
                        }
                    }
                }
            }
        };
    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Custom Font - IRANSans -->
    <style>
        @font-face {
            font-family: 'IRANSans';
            src: url('ASSETS/IRANSansXFaNum-Medium.ttf') format('truetype');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
    </style>

    <!-- Global and Page-specific CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/assistant.css">
</head>

<body class="bg-[#F5F7FB] dark:bg-slate-900 text-gray-900 dark:text-gray-100 transition-all duration-300">
    <div id="app" class="min-h-screen flex">
        <!-- Sidebar Navigation (Desktop) -->
        <aside id="sidebar-nav"
            class="hidden lg:flex flex-col w-64 bg-gradient-to-b from-medical-green-400 to-medical-green-600 text-white fixed inset-y-0 right-0 z-50 h-screen shadow-2xl">
            <!-- Brand -->
            <div class="px-6 py-5 border-b border-medical-green-500/30 flex items-center justify-between flex-shrink-0">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center backdrop-blur-sm">
                        <i class="fas fa-briefcase-medical text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">TebNegar</h1>
                        <p class="text-xs text-white/80">پنل کاربری</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 p-3 overflow-y-auto">
                <p class="px-3 py-2 text-xs text-white/60 font-medium">منو</p>
                <a href="Dashboard.html"
                    class="sidebar-nav-item flex items-center gap-3 px-4 py-3 rounded-xl text-white hover:bg-white/20 hover:scale-105 hover:shadow-lg transition-all duration-300 transform">
                    <i class="fas fa-home text-lg"></i>
                    <span>داشبورد</span>
                </a>
                <a href="Assistant.html"
                    class="sidebar-nav-item active mt-2 flex items-center gap-3 px-4 py-3 rounded-xl bg-white/20 text-white hover:bg-white/30 hover:scale-105 hover:shadow-lg transition-all duration-300 transform">
                    <i class="fas fa-robot text-lg"></i>
                    <span>دستیار هوشمند</span>
                </a>
                <a href="#files"
                    class="sidebar-nav-item mt-2 flex items-center gap-3 px-4 py-3 rounded-xl text-white hover:bg-white/20 hover:scale-105 hover:shadow-lg transition-all duration-300 transform">
                    <i class="fas fa-file-medical text-lg"></i>
                    <span>پرونده‌ها</span>
                </a>
                <a href="#statistics"
                    class="sidebar-nav-item mt-2 flex items-center gap-3 px-4 py-3 rounded-xl text-white hover:bg-white/20 hover:scale-105 hover:shadow-lg transition-all duration-300 transform">
                    <i class="fas fa-chart-bar text-lg"></i>
                    <span>آمار و گزارش</span>
                </a>
                <a href="Profile.html"
                    class="sidebar-nav-item mt-2 flex items-center gap-3 px-4 py-3 rounded-xl text-white hover:bg-white/20 hover:scale-105 hover:shadow-lg transition-all duration-300 transform">
                    <i class="fas fa-user text-lg"></i>
                    <span>پروفایل</span>
                </a>
                <a href="#goals"
                    class="sidebar-nav-item mt-2 flex items-center gap-3 px-4 py-3 rounded-xl text-white hover:bg-white/20 hover:scale-105 hover:shadow-lg transition-all duration-300 transform">
                    <i class="fas fa-bullseye text-lg"></i>
                    <span>اهداف سلامت</span>
                </a>
            </nav>

            <!-- Bottom Section -->
            <div class="p-4 border-t border-medical-green-500/30 flex-shrink-0">
                <button id="theme-toggle"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-white/20 hover:bg-white/30 hover:scale-105 transition-all duration-300 transform">
                    <i class="fas fa-moon dark:hidden text-lg"></i>
                    <i class="fas fa-sun hidden dark:block text-lg"></i>
                    <span>تغییر تم</span>
                </button>
                <button
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-white/20 hover:bg-white/30 hover:scale-105 transition-all duration-300 transform mt-2">
                    <i class="fas fa-sign-out-alt text-lg"></i>
                    <span>خروج</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col min-h-screen w-full">
            <!-- Mobile Header (Top) -->
            <header id="mobile-header"
                class="lg:hidden bg-white/90 dark:bg-gray-800/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40 w-full flex-shrink-0">
                <div class="flex items-center justify-between px-4 py-2">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-7 h-7 bg-gradient-to-r from-medical-blue-500 to-medical-green-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-cross text-white text-xs"></i>
                        </div>
                        <div>
                            <h1 class="text-base font-bold text-gray-900 dark:text-white">TebNegar</h1>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button id="mobile-menu-toggle"
                            class="p-1.5 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                            <i class="fas fa-bars text-sm"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Desktop Header (Topbar) -->
            <header
                class="hidden lg:block bg-white/90 dark:bg-gray-800/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40 w-full">
                <div class="container mx-auto px-6">
                    <div class="flex items-center justify-between py-4">
                        <div class="flex items-center gap-3">
                            <h2 class="text-lg font-bold">دستیار هوشمند</h2>
                        </div>
                        <div class="flex items-center gap-4">
                            <div
                                class="hidden xl:flex items-center bg-gray-100 dark:bg-gray-700 rounded-full px-3 py-2 w-96">
                                <i class="fas fa-search text-gray-400 ml-2"></i>
                                <input type="text" placeholder="کلید واژه جستجو کنید..."
                                    class="bg-transparent flex-1 outline-none text-sm placeholder-gray-400">
                            </div>
                            <button class="icon-btn"><i class="fas fa-bell"></i></button>
                            <button class="icon-btn"><i class="fas fa-comment-dots"></i></button>
                            <div class="relative">
                                <button id="profile-button" class="flex items-center gap-2">
                                    <img src="https://i.pravatar.cc/40?img=13" class="w-9 h-9 rounded-full"
                                        alt="user" />
                                    <div class="text-right">
                                        <div class="text-sm font-semibold">کاربر نمونه</div>
                                        <div class="text-xs text-gray-500">مدیر ارشد</div>
                                    </div>
                                    <i class="fas fa-chevron-down text-xs mr-1"></i>
                                </button>
                                <div id="profile-menu"
                                    class="hidden absolute left-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl overflow-hidden">
                                    <a href="Profile.html"
                                        class="block px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700">پروفایل</a>
                                    <a href="#"
                                        class="block px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700">تنظیمات</a>
                                    <div class="border-t border-gray-200 dark:border-gray-700"></div>
                                    <a href="#"
                                        class="block px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-gray-700">خروج</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Scrollable Content Area -->
            <div class="flex-1 overflow-y-auto">
                <!-- AI Assistant Content (Visible on this standalone page) -->
                <div id="ai-assistant-content">
                    <!-- Chat Interface -->
                    <div class="flex-1 flex relative">
                        <!-- Sidebar - Chat History -->
                        <aside id="sidebar"
                            class="fixed lg:static inset-y-0 right-0 z-40 w-80 bg-white/95 dark:bg-gray-800/95 backdrop-blur-md border-l lg:border-r border-gray-200 dark:border-gray-700 flex flex-col transform translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out">
                            <!-- Sidebar Header -->
                            <div
                                class="p-4 lg:p-6 border-b border-gray-200 dark:border-gray-600 flex items-center justify-between gap-2">
                                <h3 class="font-bold text-lg">تاریخچه چت‌ها</h3>
                                <button id="new-chat-sidebar"
                                    class="md3-btn md3-primary px-3 py-2 rounded-lg text-sm hidden lg:inline-flex items-center gap-2">
                                    <i class="fas fa-plus text-sm"></i>
                                    گفتگوی جدید
                                </button>
                                <!-- Close button for mobile -->
                                <button id="sidebar-close"
                                    class="lg:hidden p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>

                            <div class="p-3">
                                <div class="flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-xl px-3 py-2">
                                    <i class="fas fa-search text-gray-400"></i>
                                    <input type="text" placeholder="جستجو در گفتگوها"
                                        class="bg-transparent flex-1 outline-none text-sm">
                                </div>
                            </div>
                            <div id="chat-history" class="flex-1 overflow-y-auto px-4 pb-4 space-y-2">
                                <!-- Sample chat history items -->
                                <div class="chat-history-item p-3 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
                                    data-chat-id="1">
                                    <h4 class="font-medium text-sm truncate">تب و سردرد</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">امروز، ۱۰:۳۰</p>
                                </div>
                                <div class="chat-history-item p-3 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
                                    data-chat-id="2">
                                    <h4 class="font-medium text-sm truncate">درد شکم</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">دیروز، ۱۴:۲۰</p>
                                </div>
                                <div class="chat-history-item p-3 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
                                    data-chat-id="3">
                                    <h4 class="font-medium text-sm truncate">سوال دارویی</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">۲ روز پیش</p>
                                </div>
                            </div>
                        </aside>

                        <!-- Sidebar Overlay (Mobile) -->
                        <div id="sidebar-overlay"
                            class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden opacity-0 pointer-events-none transition-opacity duration-300">
                        </div>

                        <!-- Main Chat Area -->
                        <main class="flex-1 flex flex-col min-w-0 mr-0 lg:mr-0">
                            <!-- Chat minimal top bar -->
                            <div
                                class="px-4 lg:px-6 py-2 border-b border-gray-200 dark:border-gray-700 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm">
                                <div class="w-full flex items-center justify-between gap-3">
                                    <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400">
                                        <span class="w-2 h-2 rounded-full bg-green-500"></span>
                                        <span>دستیار TebNegar</span>
                                    </div>
                                    <button id="new-chat"
                                        class="md3-btn md3-primary px-3 py-2 rounded-lg inline-flex items-center gap-2">
                                        <i class="fas fa-plus"></i>
                                        گفتگوی جدید
                                    </button>
                                </div>
                            </div>
                            <!-- Welcome Card -->
                            <div id="welcome-card" class="p-4 lg:p-6">
                                <div
                                    class="medical-card bg-white/70 dark:bg-gray-800/70 rounded-2xl p-4 lg:p-6 text-center">
                                    <div
                                        class="w-12 h-12 lg:w-16 lg:h-16 bg-gradient-to-r from-medical-blue-500 to-medical-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <i class="fas fa-robot text-white text-xl lg:text-2xl"></i>
                                    </div>
                                    <h2 class="text-xl lg:text-2xl font-bold mb-2">به TebNegar خوش آمدید</h2>
                                    <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm lg:text-base">من یک دستیار
                                        هوشمند پزشکی
                                        هستم. علائم خود را شرح دهید تا بتوانم شما را راهنمایی کنم.</p>

                                    <!-- Quick Questions -->
                                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4 mt-6">
                                        <button
                                            class="quick-question p-3 lg:p-4 bg-gradient-to-r from-medical-blue-100 to-medical-blue-200 dark:from-medical-blue-900/30 dark:to-medical-blue-800/30 rounded-xl hover:scale-105 transition-transform">
                                            <i
                                                class="fas fa-thermometer-half text-medical-blue-600 text-lg lg:text-xl mb-2"></i>
                                            <p class="text-xs lg:text-sm font-medium">تب و سردرد دارم</p>
                                        </button>
                                        <button
                                            class="quick-question p-3 lg:p-4 bg-gradient-to-r from-medical-green-100 to-medical-green-200 dark:from-medical-green-900/30 dark:to-medical-green-800/30 rounded-xl hover:scale-105 transition-transform">
                                            <i class="fas fa-heart text-medical-green-600 text-lg lg:text-xl mb-2"></i>
                                            <p class="text-xs lg:text-sm font-medium">درد قفسه سینه</p>
                                        </button>
                                        <button
                                            class="quick-question p-3 lg:p-4 bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-900/30 dark:to-purple-800/30 rounded-xl hover:scale-105 transition-transform sm:col-span-2 lg:col-span-1">
                                            <i class="fas fa-pills text-purple-600 text-lg lg:text-xl mb-2"></i>
                                            <p class="text-xs lg:text-sm font-medium">سوال دارویی</p>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Chat Messages -->
                            <div id="chat-messages" class="flex-1 overflow-y-auto p-3 lg:p-4 space-y-3">
                                <!-- Messages will be inserted here -->
                            </div>

                            <!-- Input Area -->
                            <div
                                class="p-3 lg:p-4 border-t border-gray-200 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md">
                                <div class="w-full relative">
                                    <div class="chat-input-wrap">
                                        <div class="chat-input-actions">
                                            <button class="icon-btn" title="ضمیمه"><i
                                                    class="fas fa-paperclip"></i></button>
                                            <button class="icon-btn" title="اموجی"><i class="fas fa-smile"></i></button>
                                            <button class="icon-btn" title="میکروفن"><i
                                                    class="fas fa-microphone"></i></button>
                                        </div>
                                        <textarea id="message-input" placeholder="علائم خود را شرح دهید..."
                                            class="chat-textarea" rows="1"></textarea>
                                        <button id="send-button" class="send-fab" disabled>
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            </div>


            <!-- Bottom Navigation Bar (Mobile) -->
            <nav id="bottom-nav"
                class="lg:hidden fixed bottom-0 left-0 right-0 bg-white/20 dark:bg-gray-800/20 backdrop-blur-xl border-t border-white/30 dark:border-gray-700/30 shadow-2xl z-50">
                <div class="flex items-center justify-around py-2">
                    <!-- Home -->
                    <a href="Dashboard.html"
                        class="bottom-nav-item flex flex-col items-center py-2 px-3 text-gray-600 dark:text-gray-300">
                        <div
                            class="w-10 h-10 bg-white/20 dark:bg-gray-700/20 rounded-xl flex items-center justify-center mb-1 backdrop-blur-sm">
                            <i class="fas fa-home text-lg"></i>
                        </div>
                        <span class="text-xs font-medium">خانه</span>
                    </a>

                    <!-- Chat -->
                    <a href="Assistant.html"
                        class="bottom-nav-item active flex flex-col items-center py-2 px-3 text-medical-green-500">
                        <div
                            class="w-10 h-10 bg-white/20 dark:bg-gray-700/20 rounded-xl flex items-center justify-center mb-1 backdrop-blur-sm">
                            <i class="fas fa-comments text-lg"></i>
                        </div>
                        <span class="text-xs font-medium">چت</span>
                    </a>

                    <!-- Add/Create (Center Button) -->
                    <a href="#" class="bottom-nav-item flex flex-col items-center py-2 px-3">
                        <div
                            class="w-14 h-14 bg-gradient-to-r from-medical-green-500 to-medical-green-600 rounded-2xl flex items-center justify-center mb-1 shadow-2xl backdrop-blur-sm">
                            <i class="fas fa-plus text-white text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-gray-600 dark:text-gray-300">افزودن</span>
                    </a>

                    <!-- Documents -->
                    <a href="#files"
                        class="bottom-nav-item flex flex-col items-center py-2 px-3 text-gray-600 dark:text-gray-300">
                        <div
                            class="w-10 h-10 bg-white/20 dark:bg-gray-700/20 rounded-xl flex items-center justify-center mb-1 backdrop-blur-sm">
                            <i class="fas fa-file-medical text-lg"></i>
                        </div>
                        <span class="text-xs font-medium">پرونده</span>
                    </a>

                    <!-- Profile -->
                    <a href="Profile.html"
                        class="bottom-nav-item flex flex-col items-center py-2 px-3 text-gray-600 dark:text-gray-300">
                        <div
                            class="w-10 h-10 bg-white/20 dark:bg-gray-700/20 rounded-xl flex items-center justify-center mb-1 backdrop-blur-sm">
                            <i class="fas fa-user text-lg"></i>
                        </div>
                        <span class="text-xs font-medium">پروفایل</span>
                    </a>
                </div>
            </nav>
    </div>

    <!-- App Script -->
    <script src="js/assistant-page.js"></script>
</body>

</html>